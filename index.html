<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <!-- Meta tag para responsividade (funcionar bem em celulares) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Custo - Inje√ß√£o Zamac</title>

    <style>
        /* =========================================
           CSS - ESTILIZA√á√ÉO DA P√ÅGINA
           ========================================= */
        
        /* Defini√ß√µes globais de fonte e cor de fundo */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f6f9; /* Cinza claro suave */
            margin: 0;
            padding: 20px;
            color: #333;
        }

        /* Container principal centralizado */
        .container {
            max-width: 800px; /* Largura m√°xima da calculadora */
            margin: 0 auto;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Sombra suave */
        }

        /* T√≠tulo e subt√≠tulo */
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }

        /* Se√ß√µes do formul√°rio (agrupamento de inputs) */
        .form-section {
            margin-bottom: 25px;
            padding: 15px;
            background-color: #fdfdfd;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }

        .section-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #2980b9; /* Azul destaque */
            margin-bottom: 15px;
            display: block;
        }

        /* Grid para organizar os inputs (lado a lado em telas grandes) */
        .input-group {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Duas colunas iguais */
            gap: 20px;
        }

        /* Estilo dos labels e inputs */
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 0.9em;
        }

        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 1em;
            box-sizing: border-box; /* Garante que padding n√£o estoure a largura */
            transition: border-color 0.3s;
        }

        input[type="number"]:focus {
            border-color: #2980b9;
            outline: none;
        }

        /* Bot√µes de a√ß√£o */
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-calc {
            background-color: #27ae60; /* Verde */
            color: white;
        }

        .btn-calc:hover {
            background-color: #219150;
        }

        .btn-clear {
            background-color: #e74c3c; /* Vermelho */
            color: white;
        }

        .btn-clear:hover {
            background-color: #c0392b;
        }

        /* √Årea de Resultados (inicialmente oculta) */
        #resultado {
            margin-top: 40px;
            display: none; /* Escondido at√© clicar em calcular */
            animation: fadeIn 0.5s;
        }

        /* Cards de destaque dos resultados */
        .result-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border-left: 5px solid #bdc3c7;
        }

        .card.highlight {
            background-color: #e8f6f3;
            border-left-color: #27ae60; /* Destaque verde para o pre√ßo final */
        }

        .card-label {
            display: block;
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .card-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
        }

        /* √Årea do Relat√≥rio Detalhado (Passo a Passo) */
        .detailed-report {
            background-color: #fff8e1; /* Amarelo clarinho tipo nota */
            border: 1px solid #ffe0b2;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', Courier, monospace; /* Fonte monoespa√ßada para alinhar n√∫meros */
            font-size: 0.95em;
            line-height: 1.6;
        }

        .detailed-report h3 {
            margin-top: 0;
            color: #d35400;
            border-bottom: 1px dashed #d35400;
            padding-bottom: 10px;
        }

        .step-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .step-item:last-child {
            border-bottom: none;
        }

        /* Responsividade para telas pequenas (Mobile) */
        @media (max-width: 600px) {
            .input-group {
                grid-template-columns: 1fr; /* Empilha os inputs em uma coluna s√≥ */
            }
            .container {
                padding: 15px;
            }
        }

        /* Anima√ß√£o simples de aparecimento */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Calculadora de Inje√ß√£o Zamac</h1>
        <div class="subtitle">Or√ßamento Industrial de Pe√ßas</div>

        <!-- FORMUL√ÅRIO DE ENTRADA -->
        <form id="calcForm">
            
            <!-- Se√ß√£o 1: Mat√©ria-Prima -->
            <div class="form-section">
                <span class="section-title">1. Dados da Mat√©ria-Prima (MP)</span>
                <div class="input-group">
                    <div>
                        <label for="precoKg">Pre√ßo do Material (R$/kg) *</label>
                        <input type="number" id="precoKg" placeholder="Ex: 15.50" step="0.01" min="0">
                    </div>
                    <div>
                        <label for="pesoPeca">Peso da Pe√ßa (gramas) *</label>
                        <input type="number" id="pesoPeca" placeholder="Ex: 45" step="0.01" min="0">
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o 2: Injetada -->
            <div class="form-section">
                <span class="section-title">2. Dados da Injetada</span>
                <div class="input-group">
                    <div>
                        <label for="custoInjetada">Custo por Injetada (R$) *</label>
                        <input type="number" id="custoInjetada" placeholder="Ex: 120.00" step="0.01" min="0">
                        <small style="color: #777;">Valor do ciclo da m√°quina</small>
                    </div>
                    <div>
                        <label for="cavidades">N¬∫ de Cavidades do Molde *</label>
                        <input type="number" id="cavidades" placeholder="Ex: 4" step="1" min="1">
                        <small style="color: #777;">Pe√ßas por ciclo</small>
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o 3: Markup -->
            <div class="form-section">
                <span class="section-title">3. Comercial</span>
                <div>
                    <label for="markup">Markup de Venda (%) *</label>
                    <input type="number" id="markup" placeholder="Ex: 30" step="0.1" min="0">
                </div>
            </div>

            <!-- Bot√µes -->
            <div class="buttons">
                <button type="button" class="btn-clear" onclick="limparFormulario()">Limpar</button>
                <button type="button" class="btn-calc" onclick="calcular()">Calcular Pre√ßo</button>
            </div>
        </form>

        <!-- √ÅREA DE RESULTADOS -->
        <div id="resultado">
            <hr style="margin: 30px 0; border: 0; border-top: 1px solid #ddd;">
            
            <h2 style="text-align: center; color: #2c3e50;">Resumo dos Custos</h2>
            
            <!-- Cards com Valores Finais -->
            <div class="result-cards">
                <div class="card">
                    <span class="card-label">Custo MP (R$/pe√ßa)</span>
                    <span class="card-value" id="displayCustoMp">R$ 0,00</span>
                </div>
                <div class="card">
                    <span class="card-label">Custo Inje√ß√£o (R$/pe√ßa)</span>
                    <span class="card-value" id="displayCustoInj">R$ 0,00</span>
                </div>
                <div class="card">
                    <span class="card-label">Custo TOTAL (S/ Markup)</span>
                    <span class="card-value" id="displayCustoTotal">R$ 0,00</span>
                </div>
                <div class="card highlight">
                    <span class="card-label">PRE√áO FINAL DE VENDA</span>
                    <span class="card-value" id="displayPrecoVenda">R$ 0,00</span>
                </div>
            </div>

            <!-- Relat√≥rio Detalhado (Passo a Passo) -->
            <div class="detailed-report">
                <h3>üî¢ Relat√≥rio Detalhado de C√°lculo</h3>
                <div id="relatorioTexto">
                    <!-- O JavaScript vai inserir o texto aqui -->
                </div>
            </div>
        </div>
    </div>

    <script>
        /* =========================================
           JAVASCRIPT - L√ìGICA DA CALCULADORA
           ========================================= */

        function calcular() {
            // 1. Obter os valores dos inputs do HTML
            // parseFloat converte o texto do input em n√∫mero decimal
            const precoKg = parseFloat(document.getElementById('precoKg').value);
            const pesoPeca = parseFloat(document.getElementById('pesoPeca').value);
            const custoInjetada = parseFloat(document.getElementById('custoInjetada').value);
            const cavidades = parseFloat(document.getElementById('cavidades').value);
            const markup = parseFloat(document.getElementById('markup').value);

            // 2. Valida√ß√£o simples
            // Verifica se algum campo est√° vazio ou n√£o √© um n√∫mero (isNaN)
            if (isNaN(precoKg) || isNaN(pesoPeca) || isNaN(custoInjetada) || isNaN(cavidades) || isNaN(markup)) {
                alert("Por favor, preencha todos os campos obrigat√≥rios com n√∫meros v√°lidos.");
                return; // Para a execu√ß√£o da fun√ß√£o aqui se houver erro
            }

            if (cavidades <= 0) {
                alert("O n√∫mero de cavidades deve ser maior que zero.");
                return;
            }

            // 3. F√≥rmulas de C√°lculo (Conforme solicitado)

            // A) Custo da mat√©ria-prima por grama
            // F√≥rmula: pre√ßo_kg / 1000
            const custoPorGrama = precoKg / 1000;

            // B) Custo de mat√©ria-prima por pe√ßa
            // F√≥rmula: custo_por_grama * peso_peca_g
            const custoMpPeca = custoPorGrama * pesoPeca;

            // C) Custo por injetada por pe√ßa
            // F√≥rmula: custo_injetada / numero_cavidades
            const custoInjPeca = custoInjetada / cavidades;

            // D) Custo total por pe√ßa (sem markup)
            // F√≥rmula: custo_mp_peca + custo_inj_peca
            const custoTotalPeca = custoMpPeca + custoInjPeca;

            // E) Pre√ßo de venda por pe√ßa com markup
            // F√≥rmula: custo_total_peca * (1 + markup / 100)
            const fatorMarkup = 1 + (markup / 100);
            const precoVendaPeca = custoTotalPeca * fatorMarkup;


            // 4. Exibi√ß√£o dos Resultados (Sa√≠das)
            
            // Exibir a div de resultados
            document.getElementById('resultado').style.display = 'block';

            // Atualizar os Cards de Resumo (Formatando para R$)
            // toFixed(2) garante 2 casas decimais
            document.getElementById('displayCustoMp').innerText = "R$ " + custoMpPeca.toFixed(2);
            document.getElementById('displayCustoInj').innerText = "R$ " + custoInjPeca.toFixed(2);
            document.getElementById('displayCustoTotal').innerText = "R$ " + custoTotalPeca.toFixed(2);
            document.getElementById('displayPrecoVenda').innerText = "R$ " + precoVendaPeca.toFixed(2);


            // 5. Gera√ß√£o do Relat√≥rio Detalhado (Texto Passo a Passo)
            // Usamos HTML dentro da string para quebra de linha (<br>) e negrito (<b>)
            
            let relatorioHTML = "";

            // Passo 1: Convers√£o para grama
            relatorioHTML += `<div class="step-item">`;
            relatorioHTML += `<b>1. Custo por grama:</b><br>`;
            relatorioHTML += `(R$ ${precoKg.toFixed(2)} / 1000) = <b>R$ ${custoPorGrama.toFixed(4)} /g</b>`;
            relatorioHTML += `</div>`;

            // Passo 2: Custo MP Pe√ßa
            relatorioHTML += `<div class="step-item">`;
            relatorioHTML += `<b>2. Custo de Mat√©ria-Prima por pe√ßa:</b><br>`;
            relatorioHTML += `R$ ${custoPorGrama.toFixed(4)} (custo/g) √ó ${pesoPeca.toFixed(2)}g (peso) = <b>R$ ${custoMpPeca.toFixed(4)}</b>`;
            relatorioHTML += `</div>`;

            // Passo 3: Custo Injetada
            relatorioHTML += `<div class="step-item">`;
            relatorioHTML += `<b>3. Custo por Injetada por pe√ßa:</b><br>`;
            relatorioHTML += `R$ ${custoInjetada.toFixed(2)} (ciclo) √∑ ${cavidades} (cavidades) = <b>R$ ${custoInjPeca.toFixed(4)}</b>`;
            relatorioHTML += `</div>`;

            // Passo 4: Custo Total
            relatorioHTML += `<div class="step-item">`;
            relatorioHTML += `<b>4. Custo Total da pe√ßa:</b><br>`;
            relatorioHTML += `R$ ${custoMpPeca.toFixed(4)} (MP) + R$ ${custoInjPeca.toFixed(4)} (Inje√ß√£o) = <b>R$ ${custoTotalPeca.toFixed(4)}</b>`;
            relatorioHTML += `</div>`;

            // Passo 5: Pre√ßo Final
            relatorioHTML += `<div class="step-item" style="border:none; color: #27ae60;">`;
            relatorioHTML += `<b>5. Pre√ßo Final de Venda (Markup ${markup}%):</b><br>`;
            relatorioHTML += `R$ ${custoTotalPeca.toFixed(4)} √ó (1 + ${markup}/100) = <b>R$ ${precoVendaPeca.toFixed(4)}</b>`;
            relatorioHTML += `</div>`;

            // Inserir o HTML gerado na div do relat√≥rio
            document.getElementById('relatorioTexto').innerHTML = relatorioHTML;
            
            // Rola a p√°gina suavemente at√© o resultado
            document.getElementById('resultado').scrollIntoView({ behavior: 'smooth' });
        }

        function limparFormulario() {
            // Limpa os campos do formul√°rio
            document.getElementById('calcForm').reset();
            
            // Esconde a √°rea de resultados novamente
            document.getElementById('resultado').style.display = 'none';
            
            // Rola para o topo
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>

</body>
</html>
